!function(s,t,i,e){var o={title:"",content:"",id:"",button:"Submit",extraClass:"",onReady:function(){},onSubmit:function(){},beforeClose:function(){}};function n(t){this.settings=s.extend({},o,t),this.element=s(this.settings.content),this.id=this.settings.id,this._defaults=o,this._name="erpPopup",this.init()}s.extend(n.prototype,{init:function(){this.show_modal(),this.bindEvents()},bindEvents:function(){s("form.erp-modal-form","#"+this.settings.id).on("submit",s.proxy(this.formSubmit,this)),s(".erp-modal-backdrop, .erp-modal .close").on("click",s.proxy(this.closeModal,this)),s("body").on("keydown","#"+this.id,s.proxy(this.onEscapeKey,this)),s("#"+this.id).focus()},formSubmit:function(t){t.preventDefault(),s(".erp-modal-backdrop, .erp-modal").find(".erp-loader").removeClass("erp-hide"),this.settings.onSubmit.call(s(t.currentTarget),this)},show_modal:function(){if(""!==this.id&&!s("#"+this.id).length){var t=s("#erp-modal").find(".erp-modal").clone();""!==this.settings.extraClass&&t.addClass(this.settings.extraClass),t.attr("id",this.id),t.attr("tabindex",-1),t.addClass("erp-count-class"),t.find("h2").text(this.settings.title),""===this.settings.button?t.find("footer").remove():t.find(".button-primary").text(this.settings.button),t.find(".content").empty().html(this.settings.content),t.show(),s("body").append(t);var i=600*s("body").find(".erp-count-class").length,e=i-1;s("#"+this.id).css("z-index",i),s("#"+this.id).after('<div style="z-index: '+e+'" class="erp-modal-backdrop '+this.id+'"></div>'),s("."+this.id).show(),this.settings.onReady.call(t,this)}},onEscapeKey:function(t){27===t.keyCode&&this.closeModal(t)},disableButton:function(){s("button[type=submit]",".erp-modal").attr("disabled","disabled")},enableButton:function(){s("button[type=submit]",".erp-modal").removeAttr("disabled")},closeModal:function(t){void 0!==t&&t.preventDefault(),s(".erp-modal-backdrop, .erp-modal").find(".erp-loader").addClass("erp-hide"),this.settings.beforeClose.call(!1,this),s("#"+this.id).remove(),s("."+this.id).remove()},showError:function(t){s(".erp-modal-backdrop, .erp-modal").find(".erp-loader").addClass("erp-hide"),alert(t)}}),s.erpPopup=function(t){new n(t)}}(jQuery,window,document);